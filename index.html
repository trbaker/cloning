<html>
<head>
<script language="JavaScript"><!--
function function1() {
  var AGOU = document.getElementById("AGOU").value;
  var AGOP = document.getElementById("AGOP").value;
  var magicword = document.getElementById("magicword").value;
  var serviceid = document.getElementById("box1").value;
  var url = 'https://us-central1-ultimate-choir-298915.cloudfunctions.net/clone_fs?serviceid=' + serviceid + '&magicword=' + magicword + '&AGOU=' + AGOU + '&AGOP=' + AGOP;
  var el = document.getElementById('iframe1');
  el.src = url;
}
//--></script>
</head>
<body><font face="verdana, arial">
  <h2>Clone a public feature service, webmap, or application</h2>
		
<div style="width: 700px;"><font size="-1">
	This script attempts to copy/clone certain ArcGIS Online content into the target usre account. Feedback will only display below once the process has completed.  Do <b>NOT</b> press the button 
	more than once.  Wait at least ten minutes between requests. Newly cloned content will appear in a "Cloned" folder in your Content area of ArcGIS Online.

	A few important notes:
	<UL>
		<LI>This script will not copy storymaps that use the new template (2021+).
		<LI>Large or complex feature services or maps will not copy.
			Your username is case-sensitive.
		<li>The target account cannot be a single-sign on (SSO) based account.
		<LI>Expect a response from the server (below) to take up to two and a half minutes.  This app doesn't respond instantly.
		<LI>Generally, I recommend changing your password after using this tool (or any tool like it).
	</ul>
	A few sample ids for testing purposes:
	<ul>
	<LI>Feature service: <a href="https://arcgis.com/home/item.html?id=0337028a68f74a31b84721786ce65235" target="new">Countries</a>, service id: 0337028a68f74a31b84721786ce65235</li>
	<LI>Feature service: <a href="https://education.maps.arcgis.com/home/item.html?id=aa0f72033279427f89280fd55d743bbd" target="new">U.S. Rivers</a>, service id: aa0f72033279427f89280fd55d743bbd
	<LI>Feature service: <a target="new" href="https://arcgis.com/home/item.html?id=c4d0fd8737d447c1b174489c29041961">World cities over 300k</a>, service id: c4d0fd8737d447c1b174489c29041961</li>
		<li>Map: <a target="new" href="http://esriurl.com/fourgeoinquiry1">Elementary Biomes</a>, map id: 33d2aaf5bdf84ccf876eb781876e8c2a</li>
		</ul>
</div>
<table width=700><tr><td>		

	<form name="form1" onSubmit="event.preventDefault(); function1();">
<br />
Magic word: <input type="text" id="magicword" name="AGOU"> <br />		
		Target ArcGIS Online username: <input type="text" id="AGOU" name="AGOU"> <br />
    Target ArcGIS Online password  <input type="text" id="AGOP" name="AGOP"> <br />
Service id: <input type="text" id="box1" name="box1" onkeydown = "if (event.keyCode == 13) document.getElementById('myButton').click()"/>
<br /><input type='button' id="myButton" value="Start clone" onclick="javascript:function1();"/> &nbsp;&nbsp;
<input type="button" value="Clear output below" onclick="javascript:document.getElementById('iframe1').src='clone_fs.html';" >
 </form>
</center>
	</td></tr></table>


<iframe id="iframe1" name="iframe1"
	width="700"
	height="150"
	src="clone_fs.html">
</iframe>
<br><br>
<br><br>

<a href="/">Another misfit toy.</a>
</body>
</html
